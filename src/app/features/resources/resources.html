<main class="resources-page">
  <section class="resources-hero">
    <div class="resources-hero-inner">
      <div class="resources-hero-copy">
        <h1 class="resources-hero-title">{{ 'resources.title' | translate }}</h1>
        <p class="resources-hero-subtitle">{{ 'resources.subtitle' | translate }}</p>

        <div class="resources-hero-actions">
          <a class="btn btn-primary" [routerLink]="'/quote' | langLink">
            {{ 'common.request_quote' | translate }}
          </a>
          <a class="btn btn-secondary" [routerLink]="'/bu/ppe' | langLink">
            {{ 'resources.view_ppe' | translate }}
          </a>
        </div>
      </div>
    </div>
  </section>

  <section class="resources-toolbar">
    <div class="resources-toolbar-inner">
      <span class="resources-toolbar-label">{{ 'resources.filter.label' | translate }}</span>

      <button
        type="button"
        class="chip"
        [class.is-active]="filter() === 'all'"
        (click)="setFilter('all')">
        {{ 'resources.filter.all' | translate }}
      </button>

      <button
        type="button"
        class="chip"
        [class.is-active]="filter() === 'downloads'"
        (click)="setFilter('downloads')">
        {{ 'resources.filter.downloads' | translate }}
      </button>

      <button
        type="button"
        class="chip"
        [class.is-active]="filter() === 'guides'"
        (click)="setFilter('guides')">
        {{ 'resources.filter.guides' | translate }}
      </button>
    </div>
  </section>

  <section class="resources-section">
    <div class="resources-section-inner" *ngIf="items().length > 0; else emptyState">
      <div class="resources-grid">
        <article class="resources-card" *ngFor="let item of items(); trackBy: trackByTitleKey">
          <div class="resources-card-head">
            <h2 class="resources-card-title">{{ item.titleKey | translate }}</h2>

            <span class="resources-badge" *ngIf="item.badgeKey">
              {{ item.badgeKey | translate }}
            </span>
          </div>

          <p class="resources-card-desc">{{ item.descKey | translate }}</p>

          <div class="resources-card-actions">
            <ng-container *ngIf="isDownloadLink(item.href); else normalLink">
              <uplix-download-gate
                [href]="item.href"
                [labelKey]="item.ctaKey"
                [titleKey]="item.titleKey"
                buttonClass="btn btn-secondary dg-btn--compact"
                source="resources"
              ></uplix-download-gate>
            </ng-container>

            <ng-template #normalLink>
              <a
                class="btn btn-secondary btn-compact"
                [href]="item.href"
                [attr.target]="item.external ? '_blank' : null"
                [attr.rel]="item.external ? 'noopener noreferrer' : null">
                {{ item.ctaKey | translate }}
              </a>
            </ng-template>
          </div>
        </article>
      </div>
    </div>

    <ng-template #emptyState>
      <div class="resources-section-inner">
        <div class="resources-empty">
          <p class="resources-empty-title">{{ 'resources.empty.title' | translate }}</p>
          <p class="resources-empty-desc">{{ 'resources.empty.desc' | translate }}</p>
        </div>
      </div>
    </ng-template>
  </section>

  <section class="resources-hint">
    <div class="resources-hint-inner">
      <p class="resources-hint-text">{{ 'resources.hint' | translate }}</p>
    </div>
  </section>
</main>
